/**
 * Cloud Manager API
 * This API allows access to Cloud Manager programs, pipelines, and environments by an authorized technical account created through the Adobe I/O Console. The base url for this API is https://cloudmanager.adobe.io, e.g. to get the list of programs for an organization, you would make a GET request to https://cloudmanager.adobe.io/api/programs (with the correct set of headers as described below). This swagger file can be downloaded from https://raw.githubusercontent.com/AdobeDocs/cloudmanager-api-docs/master/swagger-specs/api.yaml.
 *
 * The version of the OpenAPI document: 1.0.0
 * Contact: opensource@shinesolutions.com
 *
 * NOTE: This class is auto generated by OpenAPI Generator (https://openapi-generator.tech).
 * https://openapi-generator.tech
 * Do not edit the class manually.
 */

import { autoinject } from 'aurelia-framework';
import { HttpClient } from 'aurelia-http-client';
import { Api } from './Api';
import { AuthStorage } from './AuthStorage';
import {
  VariableList,
} from './models';

/**
 * getEnvironmentVariables - parameters interface
 */
export interface IGetEnvironmentVariablesParams {
  programId: string;
  environmentId: string;
  xGwImsOrgId: string;
  authorization: string;
  xApiKey: string;
}

/**
 * patchEnvironmentVariables - parameters interface
 */
export interface IPatchEnvironmentVariablesParams {
  programId: string;
  environmentId: string;
  xGwImsOrgId: string;
  authorization: string;
  xApiKey: string;
  contentType: string;
  body: Array<Variable>;
}

/**
 * VariablesApi - API class
 */
@autoinject()
export class VariablesApi extends Api {

  /**
   * Creates a new VariablesApi class.
   *
   * @param httpClient The Aurelia HTTP client to be injected.
   * @param authStorage A storage for authentication data.
   */
  constructor(httpClient: HttpClient, authStorage: AuthStorage) {
    super(httpClient, authStorage);
  }

  /**
   * List User Environment Variables
   * List the user defined variables for an environment (Cloud Service only).
   * @param params.programId Identifier of the program
   * @param params.environmentId Identifier of the environment
   * @param params.xGwImsOrgId IMS organization ID that the request is being made under.
   * @param params.authorization Bearer [token] - An access token for the technical account created through integration with Adobe IO
   * @param params.xApiKey IMS Client ID (API Key) which is subscribed to consume services on console.adobe.io
   */
  async getEnvironmentVariables(params: IGetEnvironmentVariablesParams): Promise<VariableList> {
    // Verify required parameters are set
    this.ensureParamIsSet('getEnvironmentVariables', params, 'programId');
    this.ensureParamIsSet('getEnvironmentVariables', params, 'environmentId');
    this.ensureParamIsSet('getEnvironmentVariables', params, 'xGwImsOrgId');
    this.ensureParamIsSet('getEnvironmentVariables', params, 'authorization');
    this.ensureParamIsSet('getEnvironmentVariables', params, 'xApiKey');

    // Create URL to call
    const url = `${this.basePath}/api/program/{programId}/environment/{environmentId}/variables`
      .replace(`{${'programId'}}`, encodeURIComponent(`${params['programId']}`))
      .replace(`{${'environmentId'}}`, encodeURIComponent(`${params['environmentId']}`));

    const response = await this.httpClient.createRequest(url)
      // Set HTTP method
      .asGet()
      .withHeader('x-gw-ims-org-id', params['xGwImsOrgId'])      .withHeader('Authorization', params['authorization'])      .withHeader('x-api-key', params['xApiKey'])
      // Send the request
      .send();

    if (response.statusCode < 200 || response.statusCode >= 300) {
      throw new Error(response.content);
    }

    // Extract the content
    return response.content;
  }

  /**
   * Patch User Environment Variables
   * Modify multiple environment variables (Cloud Service only). To delete a variable, include it with an empty value.
   * @param params.programId Identifier of the program
   * @param params.environmentId Identifier of the environment
   * @param params.xGwImsOrgId IMS organization ID that the request is being made under.
   * @param params.authorization Bearer [token] - An access token for the technical account created through integration with Adobe IO
   * @param params.xApiKey IMS Client ID (API Key) which is subscribed to consume services on console.adobe.io
   * @param params.contentType Must always be application/json
   * @param params.body The list of variables to add, modify, or remove. It is not necessary to send variables here which are not changing.
   */
  async patchEnvironmentVariables(params: IPatchEnvironmentVariablesParams): Promise<VariableList> {
    // Verify required parameters are set
    this.ensureParamIsSet('patchEnvironmentVariables', params, 'programId');
    this.ensureParamIsSet('patchEnvironmentVariables', params, 'environmentId');
    this.ensureParamIsSet('patchEnvironmentVariables', params, 'xGwImsOrgId');
    this.ensureParamIsSet('patchEnvironmentVariables', params, 'authorization');
    this.ensureParamIsSet('patchEnvironmentVariables', params, 'xApiKey');
    this.ensureParamIsSet('patchEnvironmentVariables', params, 'contentType');
    this.ensureParamIsSet('patchEnvironmentVariables', params, 'body');

    // Create URL to call
    const url = `${this.basePath}/api/program/{programId}/environment/{environmentId}/variables`
      .replace(`{${'programId'}}`, encodeURIComponent(`${params['programId']}`))
      .replace(`{${'environmentId'}}`, encodeURIComponent(`${params['environmentId']}`));

    const response = await this.httpClient.createRequest(url)
      // Set HTTP method
      .asPatch()
      // Encode body parameter
      .withHeader('content-type', 'application/json')
      .withContent(JSON.stringify(params['body'] || {}))
      .withHeader('x-gw-ims-org-id', params['xGwImsOrgId'])      .withHeader('Authorization', params['authorization'])      .withHeader('x-api-key', params['xApiKey'])      .withHeader('Content-Type', params['contentType'])
      // Send the request
      .send();

    if (response.statusCode < 200 || response.statusCode >= 300) {
      throw new Error(response.content);
    }

    // Extract the content
    return response.content;
  }

}

